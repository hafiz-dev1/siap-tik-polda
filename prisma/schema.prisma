// file: prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum ArahSurat {
  MASUK
  KELUAR
}

enum TipeDokumen {
  NOTA_DINAS
  SURAT_BIASA
  SPRIN
  TELEGRAM
}

enum TujuanDisposisi {
  KASUBBID_TEKKOM
  KASUBBID_TEKINFO
  KASUBBAG_RENMIN
  KAUR_KEU
}

model Operator {
  id        String   @id @default(uuid())
  username  String   @unique
  password  String
  surat     Surat[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("operator")
}

model Surat {
  id               String          @id @default(uuid())
  nomor_surat      String          @unique
  tanggal_surat    DateTime
  perihal          String          @db.Text
  asal_surat       String
  tujuan_surat     String
  arah_surat       ArahSurat
  tipe_dokumen     TipeDokumen
  tujuan_disposisi TujuanDisposisi
  isi_disposisi    String          @db.Text
  id_operator      String
  operator         Operator        @relation(fields: [id_operator], references: [id])
  lampiran         Lampiran[]
  deletedAt        DateTime?
  createdAt        DateTime        @default(now())
  updatedAt        DateTime        @updatedAt

  @@map("surat")
}

model Lampiran {
  id          String   @id @default(uuid())
  nama_file   String
  path_file   String
  tipe_file   String
  ukuran_file Int
  id_surat    String
  surat       Surat    @relation(fields: [id_surat], references: [id], onDelete: Cascade)
  uploaded_at DateTime @default(now())

  @@map("lampiran")
}